# TODO CLI アプリケーション 実装計画書

## 1. 目的
このドキュメントは、`doc/Design.md` に基づき、TODO CLIアプリケーションの実装を段階的に進めるための計画を定義します。

## 2. 実装ステップ
本プロジェクトでは、テスト駆動開発（TDD）のアプローチを採用し、各機能の実装前にテストを記述します。

### ステップ 1: 環境構築 (0.5h)
- Python仮想環境を構築する (`uv init`)。
- 依存ライブラリ (`typer`, `pydantic`, `pytest`, `pytest-cov`, `mypy`) をインストールする。
- `pyproject.toml` または `requirements.txt` を設定する。
- `.gitignore` ファイルを作成する。
- `doc/Design.md` で定義されたプロジェクト構成（ディレクトリ、空の `__init__.py` ファイル）を作成する。

### ステップ 2: データモデルの実装 (0.5h)
- `src/todo/models.py` に `Task` モデルを `pydantic.BaseModel` を用いて実装する。

### ステップ 3: データ永続化層の実装とテスト (1.5h)
- `src/todo/database.py` に `load_tasks`, `save_tasks` 関数を実装する。
- `tests/test_database.py` を作成し、以下のケースをテストする。
    - `tasks.json` が存在しない場合の `load_tasks` の挙動。
    - `tasks.json` が存在する場合の `load_tasks` の挙動。
    - `save_tasks` が正しくファイルに書き込めること。

### ステップ 4: コアロジック層の実装とテスト (4h)
- `src/todo/manager.py` に `TaskManager` クラスと、そのすべてのメソッドを実装する。
- `tests/test_manager.py` を作成し、各メソッドの単体テストを実装する。
    - タスクの追加、編集、削除、完了が正しく行えるか。
    - IDの採番が正しく行われるか。
    - リスト表示、検索が仕様通りに動作するか。

### ステップ 5: CLIインターフェースの実装 (3h)
- `src/todo/main.py` に `typer` を用いて、すべてのコマンド (`add`, `edit`, `delete`, `complete`, `list`, `search`) を実装する。
- 各コマンドが `TaskManager` を適切に呼び出し、結果をユーザーフレンドリーな形式で表示することを確認する。
- オプション（例: `--priority`）や引数が正しく処理されることを確認する。

### ステップ 6: 結合テストと型チェック (2h)
- CLIコマンドレベルでの結合テストを `pytest` を用いて実装する（可能であれば）。
- `mypy src` を実行し、すべての型エラーを修正する。
- `pytest --cov=src` を実行し、テストカバレッジが目標値 (90%) に達していることを確認する。不足している場合はテストケースを追加する。

### ステップ 7: ドキュメント整備 (0.5h)
- `README.md` を作成し、アプリケーションのインストール方法と基本的な使い方を記述する。

## 3. 合計見積もり時間
- **約 12時間** (この見積もり時間は人間の開発者が実装を行う場合の目安です。)
